<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS CoreAnimation(二)之CATransition | 胡明涛的技术博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="这一章开始,来讲一下CAAnimation.我们做显式动画主要就是靠它/它的子类了.官方对它的描述是:CAAnimation is an abstract animation class. It provides the basic support for the CAMediaTiming and CAAction protocols. To animate Core Animation lay">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS CoreAnimation(二)之CATransition">
<meta property="og:url" content="http://hmttommy.com/2015/05/29/iOS-CoreAnimation-02/index.html">
<meta property="og:site_name" content="胡明涛的技术博客">
<meta property="og:description" content="这一章开始,来讲一下CAAnimation.我们做显式动画主要就是靠它/它的子类了.官方对它的描述是:CAAnimation is an abstract animation class. It provides the basic support for the CAMediaTiming and CAAction protocols. To animate Core Animation lay">
<meta property="og:image" content="http://7qn7zn.com1.z0.glb.clouddn.com/coreAni_004.png">
<meta property="og:image" content="http://7qn7zn.com1.z0.glb.clouddn.com/catrasition.gif">
<meta property="og:updated_time" content="2015-07-15T08:34:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS CoreAnimation(二)之CATransition">
<meta name="twitter:description" content="这一章开始,来讲一下CAAnimation.我们做显式动画主要就是靠它/它的子类了.官方对它的描述是:CAAnimation is an abstract animation class. It provides the basic support for the CAMediaTiming and CAAction protocols. To animate Core Animation lay">
  
    <link rel="alternative" href="/atom.xml" title="胡明涛的技术博客" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7qn7zn.com1.z0.glb.clouddn.com/海贼2.jpg">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="http://7qn7zn.com1.z0.glb.clouddn.com/hmt.png" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Tommy@胡明涛</a></h1>
		</hgroup>

		
		<p class="header-subtitle">迷糊小书童</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/ConanMTHu" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/3356618724/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="http://mail.163.com/js6/main.jsp?sid=VBgcRKBLaeggsBJOqgLLpzUOQmXrFqGU&df=mail163_letter#module=welcome.WelcomeModule%7C%7B%7D" title="mail">mail</a>
					        
								<a class="google" target="_blank" href="https://www.google.com/?hl=zh-cn&gws_rd=ssl" title="google">google</a>
					        
								<a class="twitter" target="_blank" href="https://twitter.com/" title="twitter">twitter</a>
					        
								<a class="linkedin" target="_blank" href="http://blog.csdn.net/hmt20130412" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/AVFoundation-二维码/" style="font-size: 10px;">AVFoundation 二维码</a> <a href="/tags/About-Me/" style="font-size: 10px;">About Me</a> <a href="/tags/AutoLayout/" style="font-size: 10px;">AutoLayout</a> <a href="/tags/CATransition/" style="font-size: 10px;">CATransition</a> <a href="/tags/Category-closure-objc-set-get/" style="font-size: 10px;">Category closure objc_set/get</a> <a href="/tags/Swift和OC互调用/" style="font-size: 10px;">Swift和OC互调用</a> <a href="/tags/Today/" style="font-size: 10px;">Today</a> <a href="/tags/hit-test/" style="font-size: 10px;">hit-test</a> <a href="/tags/imageView-性能优化/" style="font-size: 10px;">imageView 性能优化</a> <a href="/tags/json-model/" style="font-size: 10px;">json model</a> <a href="/tags/network-request/" style="font-size: 10px;">network request</a> <a href="/tags/new-origin/" style="font-size: 10px;">new origin</a> <a href="/tags/pop/" style="font-size: 10px;">pop</a> <a href="/tags/protocol-MVVM-Mixins-Traits-composition/" style="font-size: 10px;">protocol MVVM Mixins Traits composition</a> <a href="/tags/tableview-cell/" style="font-size: 10px;">tableview cell</a> <a href="/tags/单例/" style="font-size: 10px;">单例</a> <a href="/tags/基本概念/" style="font-size: 10px;">基本概念</a> <a href="/tags/基础动画-UIKit封装/" style="font-size: 10px;">基础动画 UIKit封装</a> <a href="/tags/宏-小技巧/" style="font-size: 10px;">宏 小技巧</a> <a href="/tags/小技巧/" style="font-size: 10px;">小技巧</a> <a href="/tags/策略/" style="font-size: 10px;">策略</a> <a href="/tags/适配-AutoLayout/" style="font-size: 10px;">适配 AutoLayout</a> <a href="/tags/链接-blog/" style="font-size: 10px;">链接 blog</a> <a href="/tags/链接-github-Demo/" style="font-size: 10px;">链接 github Demo</a> <a href="/tags/面试题/" style="font-size: 10px;">面试题</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">iOS爱好者，还想学习更多，C++ Python PHP Java JS...</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Tommy@胡明涛</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7qn7zn.com1.z0.glb.clouddn.com/hmt.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Tommy@胡明涛</h1>
			</hgroup>
			
			<p class="header-subtitle">迷糊小书童</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ConanMTHu" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/3356618724/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="http://mail.163.com/js6/main.jsp?sid=VBgcRKBLaeggsBJOqgLLpzUOQmXrFqGU&df=mail163_letter#module=welcome.WelcomeModule%7C%7B%7D" title="mail">mail</a>
			        
						<a class="google" target="_blank" href="https://www.google.com/?hl=zh-cn&gws_rd=ssl" title="google">google</a>
			        
						<a class="twitter" target="_blank" href="https://twitter.com/" title="twitter">twitter</a>
			        
						<a class="linkedin" target="_blank" href="http://blog.csdn.net/hmt20130412" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-iOS-CoreAnimation-02" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/29/iOS-CoreAnimation-02/" class="article-date">
  	<time datetime="2015-05-29T02:36:41.000Z" itemprop="datePublished">2015-05-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS CoreAnimation(二)之CATransition
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CATransition/">CATransition</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/CoreAnimation/">CoreAnimation</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这一章开始,来讲一下<code>CAAnimation</code>.我们做显式动画主要就是靠它/它的子类了.官方对它的描述是:CAAnimation is an abstract animation class. It provides the basic support for the CAMediaTiming and CAAction protocols. To animate Core Animation layers or Scene Kit objects, create instances of the concrete subclasses CABasicAnimation, CAKeyframeAnimation, CAAnimationGroup, or CATransition.<br>@结构图如下:<br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/coreAni_004.png" alt="">  </p>
<p>标题是<code>CATransition</code>,为什么先写它呢?因为我觉得它有点特殊,主要用来做VC页面切换之间的过渡动画,之前在code4app上一个展示什么立方体-水滴-镜头开关效果等动画就是拿它做的(当时觉得,哇,好炫,不过据说是私有的api,审核不一定能过)…个人感觉用它用的最少,而且iOS7之后苹果提供了自定义VC转场动画的API,已经能够很好的实现各种需求的动画效果.可以参照我之前的文章:<br><a href="http://blog.csdn.net/hmt20130412/article/details/39079905" target="_blank" rel="external">iOS7新特性 ViewController转场切换(一) 以前总结和关键API介绍</a><br><a href="http://blog.csdn.net/hmt20130412/article/details/39080445" target="_blank" rel="external">iOS7新特性 ViewController转场切换(二) 系统视图控制器容器的切换动画—push pop present dismis</a><br><a href="http://blog.csdn.net/hmt20130412/article/details/39119917" target="_blank" rel="external"> iOS7新特性 ViewController转场切换(三) 自定义视图控制器容器的切换—非交互式</a><br><a id="more"></a></p>
<p>直接上一个栗子:<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    func animationCATransition() &#123;</span><br><span class="line">        <span class="keyword">let</span> transitionAni = CATransition()</span><br><span class="line">        transitionAni<span class="built_in">.</span><span class="built_in">duration</span> = <span class="number">1.0</span></span><br><span class="line">        <span class="comment">// 设定动画的进度</span></span><br><span class="line"><span class="comment">//        transitionAni.startProgress = 0.0</span></span><br><span class="line"><span class="comment">//        transitionAni.endProgress = 0.9</span></span><br><span class="line">        <span class="comment">// 页面过渡的类型,栗子:立方体翻转</span></span><br><span class="line">        transitionAni<span class="built_in">.</span><span class="keyword">type</span> = <span class="string">"cube"</span></span><br><span class="line">        <span class="comment">// 页面过渡的方向,栗子:从左开始</span></span><br><span class="line">        transitionAni<span class="built_in">.</span>subtype = kCATransitionFromLeft</span><br><span class="line">        <span class="built_in">self</span><span class="built_in">.</span>navigationController<span class="subst">!</span><span class="built_in">.</span>view<span class="built_in">.</span>layer<span class="built_in">.</span>addAnimation(transitionAni, forKey: nil)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> testVC = <span class="built_in">self</span><span class="built_in">.</span>storyboard<span class="subst">!</span><span class="built_in">.</span>instantiateViewControllerWithIdentifier(<span class="string">"TestViewController"</span>) as<span class="subst">!</span> TestViewController</span><br><span class="line">        <span class="built_in">self</span><span class="built_in">.</span>navigationController<span class="subst">!</span><span class="built_in">.</span>pushViewController(testVC, animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span><br><span class="line">`</span><span class="keyword">type</span><span class="string">`:页面过渡种类</span></span><br></pre></td></tr></table></figure></p>
<p>// 交叉淡化过渡<br>let kCATransitionFade: String<br>// 新视图移到旧视图上面<br>@available(iOS 2.0, <em>)<br>let kCATransitionMoveIn: String<br>// 新视图把旧视图推出去<br>@available(iOS 2.0, </em>)<br>let kCATransitionPush: String<br>// 将旧视图移动,系那是下面的新视图<br>@available(iOS 2.0, *)<br>let kCATransitionReveal: String</p>
<p>–据说是私有的,慎重使用,有的说能过审核,有的说不能过囧–<br>“pageCurl “              向上翻一页<br>“pageUnCurl”             向下翻一页<br>“rippleEffect”           滴水(波纹)效果<br>“suckEffect”             收缩效果，如一块布被抽走或者是被吸收<br>“cube”                   立方体效果<br>“oglFlip”                上下翻转效果<br>“cameraIrisHollowOpen”   镜头开效果<br>“cameraIrisHollowClose”  镜头关效果<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="escape">`s</span>ubtype<span class="escape">`:</span>页面过渡方向</span><br></pre></td></tr></table></figure></p>
<p> kCATransitionFromRight<br> kCATransitionFromLeft<br> kCATransitionFromTop<br> kCATransitionFromBottom<br>```  </p>
<p><code>filter</code>:不太懂…  </p>
<p>@大致就这些了,上一个立方体翻转的效果图…0.0貌似也就那样…<br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/catrasition.gif" alt=""></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/12/Star-Github-share/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Star Github share
        
      </div>
    </a>
  
  
    <a href="/2015/05/27/iOS-CoreAnimation-01/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">iOS CoreAnimation(一)之UIKit封装的UIView动画</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="iOS-CoreAnimation-02" data-title="iOS CoreAnimation(二)之CATransition" data-url="http://hmttommy.com/2015/05/29/iOS-CoreAnimation-02/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"humingtao"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>



</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Tommy@胡明涛
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>


<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72551550-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>