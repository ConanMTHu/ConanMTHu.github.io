<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>胡明涛的技术博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="blog IT">
<meta property="og:type" content="website">
<meta property="og:title" content="胡明涛的技术博客">
<meta property="og:url" content="http://hmttommy.com/page/2/index.html">
<meta property="og:site_name" content="胡明涛的技术博客">
<meta property="og:description" content="blog IT">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="胡明涛的技术博客">
<meta name="twitter:description" content="blog IT">
  
    <link rel="alternative" href="/atom.xml" title="胡明涛的技术博客" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7qn7zn.com1.z0.glb.clouddn.com/海贼2.jpg">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="http://7qn7zn.com1.z0.glb.clouddn.com/hmt.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">Tommy@迷糊小书童</a></h1>
        </hgroup>

        
        <p class="header-subtitle">talk is cheap, show me your code</p>
        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="/tommyyaphetshu@163.com" title="Email"></a></li>
                            
                                <li id="新浪微博"><a class="新浪微博" target="_blank" href="http://weibo.com/3356618724/profile?rightmod=1&wvr=6&mod=personinfo" title="新浪微博"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/ConanMTHu" title="GitHub"></a></li>
                            
                                <li id="Google"><a class="Google" target="_blank" href="https://www.google.com/?hl=zh-cn&gws_rd=ssl" title="Google"></a></li>
                            
                                <li id="Twitter"><a class="Twitter" target="_blank" href="https://twitter.com/" title="Twitter"></a></li>
                            
                                <li id="LinkedIn"><a class="LinkedIn" target="_blank" href="http://blog.csdn.net/hmt20130412" title="LinkedIn"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/AVFoundation-二维码/" style="font-size: 10px;">AVFoundation 二维码</a> <a href="/tags/About-Me/" style="font-size: 10px;">About Me</a> <a href="/tags/AutoLayout/" style="font-size: 10px;">AutoLayout</a> <a href="/tags/Basic-KeyFrame/" style="font-size: 10px;">Basic KeyFrame</a> <a href="/tags/CAAnimation-CAMediaTiming/" style="font-size: 10px;">CAAnimation CAMediaTiming</a> <a href="/tags/CATransition/" style="font-size: 10px;">CATransition</a> <a href="/tags/Category-closure-objc-set-get/" style="font-size: 10px;">Category closure objc_set/get</a> <a href="/tags/Swift和OC互调用/" style="font-size: 10px;">Swift和OC互调用</a> <a href="/tags/Today/" style="font-size: 10px;">Today</a> <a href="/tags/hit-test/" style="font-size: 10px;">hit-test</a> <a href="/tags/imageView-性能优化/" style="font-size: 10px;">imageView 性能优化</a> <a href="/tags/json-model/" style="font-size: 10px;">json model</a> <a href="/tags/network-request/" style="font-size: 10px;">network request</a> <a href="/tags/new-origin/" style="font-size: 10px;">new origin</a> <a href="/tags/pop/" style="font-size: 10px;">pop</a> <a href="/tags/protocol-MVVM-Mixins-Traits-composition/" style="font-size: 10px;">protocol MVVM Mixins Traits composition</a> <a href="/tags/tableview-cell/" style="font-size: 10px;">tableview cell</a> <a href="/tags/xctool/" style="font-size: 10px;">xctool</a> <a href="/tags/单例/" style="font-size: 10px;">单例</a> <a href="/tags/图片浏览-Custom-push/" style="font-size: 10px;">图片浏览 Custom push</a> <a href="/tags/基本概念/" style="font-size: 10px;">基本概念</a> <a href="/tags/基础动画-UIKit封装/" style="font-size: 10px;">基础动画 UIKit封装</a> <a href="/tags/宏-小技巧/" style="font-size: 10px;">宏 小技巧</a> <a href="/tags/小技巧/" style="font-size: 10px;">小技巧</a> <a href="/tags/策略/" style="font-size: 10px;">策略</a> <a href="/tags/适配-AutoLayout/" style="font-size: 10px;">适配 AutoLayout</a> <a href="/tags/链接-blog/" style="font-size: 10px;">链接 blog</a> <a href="/tags/链接-github-Demo/" style="font-size: 10px;">链接 github Demo</a> <a href="/tags/面试题/" style="font-size: 10px;">面试题</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">相信coding能够改变世界的IT爱好者</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Tommy@迷糊小书童</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img lazy-src="http://7qn7zn.com1.z0.glb.clouddn.com/hmt.png" class="js-avatar">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Tommy@迷糊小书童</a></h1>
            </hgroup>
            
            <p class="header-subtitle">talk is cheap, show me your code</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="/tommyyaphetshu@163.com" title="Email"></a></li>
                            
                                <li id="新浪微博"><a class="新浪微博" target="_blank" href="http://weibo.com/3356618724/profile?rightmod=1&wvr=6&mod=personinfo" title="新浪微博"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/ConanMTHu" title="GitHub"></a></li>
                            
                                <li id="Google"><a class="Google" target="_blank" href="https://www.google.com/?hl=zh-cn&gws_rd=ssl" title="Google"></a></li>
                            
                                <li id="Twitter"><a class="Twitter" target="_blank" href="https://twitter.com/" title="Twitter"></a></li>
                            
                                <li id="LinkedIn"><a class="LinkedIn" target="_blank" href="http://blog.csdn.net/hmt20130412" title="LinkedIn"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-xctool-xcodebuild自动打包傻瓜式教程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/16/xctool-xcodebuild自动打包傻瓜式教程/" class="article-date">
      <time datetime="2015-10-16T08:20:54.000Z" itemprop="datePublished">2015-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/xctool-xcodebuild自动打包傻瓜式教程/">xctool+xcodebuild自动打包傻瓜式教程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>以前打包提测觉得没什么,<code>选证书-选profile-选xxx-选xxxxx</code>,但一天打N次包后就有那么点厌烦了…俗话说:不会”偷懒”的攻城狮不是好的攻城狮,我知道很久之前就已经有自动打包(貌似略土,那就自动化的持续集成?随意了…),那时是坏的懒性主导,正好昨天逛微博有篇文章讲<code>XCToool自动打包</code>的,就决定亲自做一下,折腾了1小时后,总算OK了…在此记录一下.<br>(PS:为什么叫傻瓜教程呢?因为LZ略蠢,shell命令也不太懂,查了很多资料+波波的教导,一步一步的才调好)<br><br></p>
<h2 id="u5B89_u88C5"><a href="#u5B89_u88C5" class="headerlink" title="安装"></a><font color="IndianRed">安装</font></h2><p>xctool的<a href="https://github.com/facebook/xctool" target="_blank" rel="external">Github地址</a>,当然最好是通过<a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew</a>来安装,简单方便.<br><code>brew update</code><br><code>brew install xctool</code><br>等等就OK了.<br><br></p>
<h2 id="u76F4_u63A5_u53EF_u6267_u884C_u7684_u6587_u672C"><a href="#u76F4_u63A5_u53EF_u6267_u884C_u7684_u6587_u672C" class="headerlink" title="直接可执行的文本"></a><font color="IndianRed">直接可执行的文本</font></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/sh</span></span><br><span class="line"><span class="built_in">set</span> <span class="operator">-e</span></span><br><span class="line"><span class="built_in">cd</span> `dirname <span class="variable">$0</span>`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SCHEME_NAME=Wecube</span><br><span class="line">WORKSPACE_PATH=/Users/humingtao/Desktop/Wecube/Wecube.xcworkspace</span><br><span class="line">PROFILE_NAME=<span class="string">'com.shuabao.wecube.production'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TIME_STAMP=`date <span class="string">"+%Y%m%d%H"</span>`</span><br><span class="line">BUILD_TIME=$(date +%Y%m%d%H%M)</span><br><span class="line">ArchivePath=/Users/humingtao/Desktop/AutoIpa/ArchivePath/<span class="variable">$&#123;SCHEME_NAME&#125;</span>.xcarchive</span><br><span class="line">PacketName=/Users/humingtao/Desktop/AutoIpa/ipa/<span class="variable">$&#123;SCHEME_NAME&#125;</span>_<span class="variable">$&#123;BUILD_TIME&#125;</span>.ipa</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># clean</span></span><br><span class="line">xctool -workspace <span class="variable">$&#123;WORKSPACE_PATH&#125;</span> -scheme <span class="variable">$&#123;SCHEME_NAME&#125;</span> clean</span><br><span class="line"></span><br><span class="line"><span class="comment">#archive</span></span><br><span class="line">xctool -workspace <span class="variable">$&#123;WORKSPACE_PATH&#125;</span> -scheme <span class="variable">$&#123;SCHEME_NAME&#125;</span> archive -archivePath <span class="variable">$&#123;ArchivePath&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#export</span></span><br><span class="line">xcodebuild -exportArchive -exportFormat IPA -archivePath <span class="variable">$&#123;ArchivePath&#125;</span> -exportPath <span class="variable">$&#123;PacketName&#125;</span> -exportProvisioningProfile <span class="string">"<span class="variable">$&#123;PROFILE_NAME&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<p><code>第一行</code>:指次脚本使用/bin/sh来解释执行<br><code>第二行</code>:出错立刻终止<br><code>第三行</code>:cd 当前目录<br><code>第六行</code>:你工程的Scheme名,一般就是xcode终止运行按钮旁边的那个,还不知道的话自行谷歌..<br><code>第七行</code>:如果你的工程接入了cocoapods,那么后缀就是xcworkspace,否则就是常规后缀(路径我是绝对路径,这个梗后面说)<br><code>第八行</code>:profile…都懂吧?发布的配置概要文件,写上对应的名字就行了<br><code>第十二行</code>:通过时间来命令ipa包的名字<br><code>第十三行</code>:存放打包过程中生成的序列化文件的文件夹(AutoIpa是我在desktop上建立的文件夹,ArchivePath会自动创建)<br><code>第十四行</code>:最后生成的ipa文件所在路径(AutoIpa是我在desktop上建立的文件夹,ipa文件夹也要自己创建)<br><code>剩下的</code>:就是xcodebuild的命令,不需要懂,前面的参数填好就OK  </p>
<p><br></p>
<h2 id="u6CE8_u610F"><a href="#u6CE8_u610F" class="headerlink" title="注意"></a><font color="IndianRed">注意</font></h2><ul>
<li>LZ用的是绝对路径,因为我没有把脚本和生成ipa的文件夹直接放到工程里面…这个根据自身情况来弄,我喜欢什么都往桌面放…  </li>
<li>文本的后缀名用.sh,直接扔终端回车就行,如果出现<code>Permission denied</code>,那么就修改一下文件权限:chmod 777 xxxx.sh 就行了  </li>
</ul>
<p>附上打包成功的图:<br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/xctool_success.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/工具/">工具</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xctool/">xctool</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Star-Github-share" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/12/Star-Github-share/" class="article-date">
      <time datetime="2015-10-12T09:11:02.000Z" itemprop="datePublished">2015-10-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/12/Star-Github-share/">Star Github share</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h2 id="u524D_u8A00"><a href="#u524D_u8A00" class="headerlink" title="前言"></a><a id="foreword"></a><font color="IndianRed">前言</font></h2><p> Github可说是全球最大的IT”交友约会”网站,各种各样牛逼的<code>open source code</code>,star!star!star!LZ逛github也有些时候了,经常会出现一个困惑,就是star了新的,很多以前star的一想不起名字,就很难找到,要一页一页的翻…想想,如果你star超过了50多页,每一次不得找死…之前我是用<code>Chrome</code>的收藏夹功能来区分,一段时间努力后,就成了下面这个样子:<br> <img src="http://7qn7zn.com1.z0.glb.clouddn.com/chrome%20github.png" alt=""><br> 还是比较方便的,起码完成了分类,只是没能加上自己收藏时对链接的注释(这样查找更快了),昨天朋友推荐了<a href="https://app.astralapp.com/">Astral</a>,通过加标签的方式来实现分类,也很直观明了…那为什么LZ还要做这个整理呢?一是,能够分享出来;二是:可以自己无限的加入自己解释,更快的<code>天下Code,唯快不破</code>查找^_^!<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/资料/">资料</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/链接-github-Demo/">链接 github Demo</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/10/12/Star-Github-share/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-iOS-CoreAnimation-三-之CAAnimation" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/03/iOS-CoreAnimation-三-之CAAnimation/" class="article-date">
      <time datetime="2015-06-03T07:39:33.000Z" itemprop="datePublished">2015-06-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/03/iOS-CoreAnimation-三-之CAAnimation/">iOS CoreAnimation(三)之CAAnimation</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>原定第三篇直接介绍<code>CAPropertyAnimation</code>的两个子类,想想还是回过头来梳理一下<font color="#ce1f48"><code>CAAnimation</code></font>这个父类,比如<code>CABasicAnimation</code>属于他自己的只有3个property,其他都是继承来的.不过就算是<code>CAAnimation</code>,它自身的property还是用的不多,像我们定义动画常常设置的时间property<code>duration</code>,<code>beginTime</code>,<code>repeatCount</code>等都在协议<font color="#ce1f48"><code>CAMediaTiming</code></font>&gt;中…<br><br> </p>
<h2 id="CAAnimation_Property"><a href="#CAAnimation_Property" class="headerlink" title="CAAnimation Property"></a><font color="#ce1f48">CAAnimation Property</font></h2><p><code>removedOnCompletion</code>:设置是否动画完成后，动画效果从设置的layer上移除。默认为YES<br><code>timingFunction</code>:用于变化起点和终点之间的插值计算,形象点说它决定了动画运行的节奏,比如是均匀变化(相同时间变化量相同)还是先快后慢,先慢后快还是先慢再快再慢.(类似于第一章最后介绍的那些枚举)LZ数学略渣,这里引用一段话(<a href="http://geeklu.com/2012/09/animation-in-ios/">http://geeklu.com/2012/09/animation-in-ios/</a>)<br><strong>时间函数是使用的一段函数来描述的,横座标是时间t取值范围是0.0-1.0,纵座标是变化量x(t)也是取值范围也是0.0-1.0 假设有一个动画,duration是8秒,变化值的起点是a终点是b(假设是透明度),那么在4秒处的值是多少呢？ 可以通过计算为 a + x(4/8) <em> (b-a), 为什么这么计算呢？讲实现的时间映射到单位值的时候4秒相对于总时间8秒就是0.5然后可以得到0.5的时候单位变化量是 x(0.5), x(0.5)/1 = 实际变化量/(b-a), 其中b-a为总变化量,所以实际变化量就是x(0.5) </em> (b-a) ,最后4秒时的值就是 a + x(0.5) * (b-a),所以计算的本质是映射.<br>Timing Function对应的类是<font color="#ce1f48"><code>CAMediaTimingFunction</code></font>,它提供了两种获得时间函数的方式,一种是使用预定义的五种时间函数,一种是通过给点两个控制点得到一个时间函数</strong><br>系统给的最熟悉的就是<code>Linear</code>了,匀速…</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">k<span class="built_in">CAMediaTimingFunctionLinear</span>, </span><br><span class="line">k<span class="built_in">CAMediaTimingFunctionEaseIn</span>, </span><br><span class="line">k<span class="built_in">CAMediaTimingFunctionEaseOut</span>, </span><br><span class="line">k<span class="built_in">CAMediaTimingFunctionEaseInEaseOut</span>, </span><br><span class="line">k<span class="built_in">CAMediaTimingFunctionDefault</span>.</span><br></pre></td></tr></table></figure>
<p>自定义的则是下面2个方法:(贝塞尔曲线什么的,不太懂…)<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/CoreAnimation/">CoreAnimation</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CAAnimation-CAMediaTiming/">CAAnimation CAMediaTiming</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/06/03/iOS-CoreAnimation-三-之CAAnimation/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-iOS-CoreAnimation-02" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/29/iOS-CoreAnimation-02/" class="article-date">
      <time datetime="2015-05-29T02:36:41.000Z" itemprop="datePublished">2015-05-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/29/iOS-CoreAnimation-02/">iOS CoreAnimation(二)之CATransition</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>这一章开始,来讲一下<code>CAAnimation</code>.我们做显式动画主要就是靠它/它的子类了.官方对它的描述是:CAAnimation is an abstract animation class. It provides the basic support for the CAMediaTiming and CAAction protocols. To animate Core Animation layers or Scene Kit objects, create instances of the concrete subclasses CABasicAnimation, CAKeyframeAnimation, CAAnimationGroup, or CATransition.<br>@结构图如下:<br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/coreAni_004.png" alt="">  </p>
<p>标题是<code>CATransition</code>,为什么先写它呢?因为我觉得它有点特殊,主要用来做VC页面切换之间的过渡动画,之前在code4app上一个展示什么立方体-水滴-镜头开关效果等动画就是拿它做的(当时觉得,哇,好炫,不过据说是私有的api,审核不一定能过)…个人感觉用它用的最少,而且iOS7之后苹果提供了自定义VC转场动画的API,已经能够很好的实现各种需求的动画效果.可以参照我之前的文章:<br><a href="http://blog.csdn.net/hmt20130412/article/details/39079905">iOS7新特性 ViewController转场切换(一) 以前总结和关键API介绍</a><br><a href="http://blog.csdn.net/hmt20130412/article/details/39080445">iOS7新特性 ViewController转场切换(二) 系统视图控制器容器的切换动画—push pop present dismis</a><br><a href="http://blog.csdn.net/hmt20130412/article/details/39119917"> iOS7新特性 ViewController转场切换(三) 自定义视图控制器容器的切换—非交互式</a><br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/CoreAnimation/">CoreAnimation</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CATransition/">CATransition</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/05/29/iOS-CoreAnimation-02/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-iOS-CoreAnimation-01" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/27/iOS-CoreAnimation-01/" class="article-date">
      <time datetime="2015-05-27T03:00:10.000Z" itemprop="datePublished">2015-05-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/27/iOS-CoreAnimation-01/">iOS CoreAnimation(一)之UIKit封装的UIView动画</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a><font color="IndianRed">Start</font></h2><p>我们开发App的时候,经常要用到各种动画来实现炫丽效果,本人也十分的喜欢研究动画,所以打算对于<code>动画-Core Animation</code>相关的知识做个梳理与总结.  </p>
<p><code>Core Animation</code>最大好处是可以帮助Mac或者iPhone的开发者减少代码量。因为如果你想用Core Image或者Open GL实现界面的动画特效，其实也是可以的，主要是非常麻烦。而用Core Animation可以极大简化开发难度和减少代码量。</p>
<p><strong>PS:只是对于基础用法和概念进行整理与说明,各种酷炫效果的Demo就靠大家自己去实现了^_^</strong>  </p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/CoreAnimation/">CoreAnimation</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础动画-UIKit封装/">基础动画 UIKit封装</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/05/27/iOS-CoreAnimation-01/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-iOS-hitTest" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/25/iOS-hitTest/" class="article-date">
      <time datetime="2015-05-25T08:24:51.000Z" itemprop="datePublished">2015-05-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/25/iOS-hitTest/">iOS hitTest-点击事件分发分析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>最近朋友问了我个点击事件处理的问题,自己从前也没怎么仔细想过,查过资料才明白是怎么一回事,遂做个小结.<br>写了个小Demo,地址是:<a href="https://github.com/ConanMTHu/HitTestDemo">点这里</a><br>先来看一张图:<br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/hittest_01.png" alt=""><br><code>0-1-2</code>代表了他们的层级关系,可见<code>button_1</code>被<code>view_1</code>盖住了,如何透过<code>view_1</code>实现对<code>button_1</code>的点击呢?<br>当时想的就是改<code>userInteractionEnabled = NO</code>(这个属性大家肯定不陌生,<code>UILabel</code>和<code>UIImageView</code>无法接收点击事件就是因为这个属性默认设置为了<code>NO</code>),类似还有<code>Hidden＝YES/alpha&lt;0.01等</code>,虽然可以实现预期点击,但是这样也影响了<code>view_1和他的子视图button_2(无法被点击)</code>.那改怎么做呢?搜了一下,<code>userInteractionEnabled = NO</code>等价于<code>使当前的hitTest：withEvent返回nil</code>,这是个啥?
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/事件传递/">事件传递</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hit-test/">hit-test</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/05/25/iOS-hitTest/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-AutolayoutDetail" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/04/14/AutolayoutDetail/" class="article-date">
      <time datetime="2015-04-14T08:20:21.000Z" itemprop="datePublished">2015-04-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/14/AutolayoutDetail/">Autolayout优秀的第三方开源库</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>最近项目开始用纯代码布局整个UI框架, 对于前一段很长时间都是xib+storyboard狂拖控件约束的我来说,每天写的代码量剧增…对于<code>sb好还是纯代码好的争论</code>,可以参考下<a href="http://blog.devtang.com/blog/2015/03/22/ios-dev-controversy-2/">巧大大的分析</a>.<br>说到UI适配布局,一般有两种方法:  </p>
<ul>
<li>frame,利用<code>[UIScreen mainScreen].bounds.size.width/height</code>,一个一个的算出对应frame,结果肯定是OK的,只是过程异常的痛苦,尤其像我这种语文老师教的数学的小学生.囧.  </li>
<li>autolayout,相信肯定是主流布局,而且对于UI设计师给我的效果图,也是很方便我们直接拿来进行约束设值,无须其他任何计算.    </li>
</ul>
<p>这里主要介绍手写autolayout约束,由于系统提供的api写起来<code>又臭又长</code>,推荐一个不错的第三方.<br>OC版本对应的是<code>Masonry</code>,Swift版本对应的是<code>SnapKit</code>.当然还有其他优秀的autolayout相关第三方,会在结尾给出,感兴趣的朋友可以去研究下,LZ主要用<code>Masonry</code>(大爱这种链式语法)^_^!<br><br></p>
<h2 id="Masonry"><a href="#Masonry" class="headerlink" title="Masonry"></a><font color="IndianRed">Masonry</font></h2><p>Github地址是:<a href="https://github.com/SnapKit/Masonry">Masonry</a><br>具体用法github上已经讲的很清楚了,可以下载Demo看看栗子的实现,总结一下我在使用过程中了解.  </p>
<ul>
<li><code>mas_makeConstraints</code>使用最多,做初始约束,只负责新增约束</li>
<li><code>mas_updateConstraints</code>针对<code>make</code>中的约束做更新,一般不添加新约束,只是对于原约束数值的修改.  </li>
<li><code>mas_remakeConstraints</code>清除之前所有的约束,采用里面设置的最新约束,常用于动画之后新位置的约束设定  </li>
<li>优先级高<code>.priorityHigh</code>,优先级低<code>.priorityLow</code>,通常用于根据条件判断来设定优先响应哪种约束  </li>
<li><p><code>multipliedBy(x)</code>= *x,<code>dividedBy(x)</code> = /x</p>
</li>
<li><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">make</span>.edges.mas_equalTo(UIEdgeInsetsMake(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>));</span><br><span class="line">// edges就是相当于top-<span class="keyword">left</span>-bottom-<span class="keyword">right</span></span><br><span class="line">// top和<span class="keyword">left</span>里的offset为正数</span><br><span class="line">// 那么为什么bottom和<span class="keyword">right</span>里的offset是负数呢? 因为这里计算的是绝对的数值 计算的bottom需要小于<span class="keyword">sv</span>的底部高度 所以要-<span class="number">10</span> 同理用于<span class="keyword">right</span></span><br><span class="line">// 有意思的地方是<span class="built_in">and</span>和with 其实这两个函数什么事情都没做,可以省略的</span><br><span class="line"></span><br><span class="line">/* 等价于</span><br><span class="line"> <span class="keyword">make</span>.top.equalTo(weakSelf.<span class="keyword">sv</span>).with.offset(<span class="number">10</span>);</span><br><span class="line"> <span class="keyword">make</span>.<span class="keyword">left</span>.equalTo(weakSelf.<span class="keyword">sv</span>).with.offset(<span class="number">10</span>);</span><br><span class="line"> <span class="keyword">make</span>.bottom.equalTo(weakSelf.<span class="keyword">sv</span>).with.offset(-<span class="number">10</span>);</span><br><span class="line"> <span class="keyword">make</span>.<span class="keyword">right</span>.equalTo(weakSelf.<span class="keyword">sv</span>).with.offset(-<span class="number">10</span>);</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
</li>
</ul>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/第三方库/">第三方库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AutoLayout/">AutoLayout</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/04/14/AutolayoutDetail/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-设计模式-二-之策略模式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/04/01/设计模式-二-之策略模式/" class="article-date">
      <time datetime="2015-04-01T00:41:23.000Z" itemprop="datePublished">2015-04-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/01/设计模式-二-之策略模式/">设计模式(二)之策略模式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="u521D_u5165_u6C5F_u6E56"><a href="#u521D_u5165_u6C5F_u6E56" class="headerlink" title="初入江湖"></a><font color="IndianRed">初入江湖</font></h1><p><strong>策略模式</strong>：定义一系列的算法,把每一个算法封装起来, 并且使它们可相互替换。本模式使得算法可独立于使用它的客户而变化.<br>0.0好吧,基本上所有介绍策略模式的基本都是这样的开头,详情概念可见<a href="http://baike.baidu.com/link?url=K31Rsj_er4saTaz4l0L69f6YxCMbVTnR9KO007RcP4ymkNGqhvABAtWb3o038qrgLOmVJJOxV08HZVh3HfRTGK" target="_blank" rel="external">策略模式百度百科</a>!博主最初用它,除了善用设计模式优化代码结构之外,最主要的就是消除万恶的<code>if else</code>或<code>switch case</code>(很讨厌<code>if else</code>…在写代码的时候能够用<code>? :</code>就用)<br>话不多说,先来张图(盗的,勿喷,^_^):<br><img src="http://hmtphoto.qiniudn.com/strategy_001.jpg" alt="">  </p>
<h1 id="u5C0F_u8BD5_u624B_u5200"><a href="#u5C0F_u8BD5_u624B_u5200" class="headerlink" title="小试手刀"></a><font color="IndianRed">小试手刀</font></h1><p>我举得栗子概念是<a href="http://casatwy.com/iosying-yong-jia-gou-tan-viewceng-de-zu-zhi-he-diao-yong-fang-an.html" target="_blank" rel="external">iOS应用架构谈 view层的组织和调用方案</a>(<strong>强烈推荐此文,很长但是涉及到了很多知识点</strong>)中谈到的文件<code>聊天应用的消息发送模块</code>  </p>
<ul>
<li>定义一个<code>Context</code>类,里面有一个<code>RootStrategy</code>属性  <figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">enum MessageSendStrategyType &#123;</span><br><span class="line">    case Text</span><br><span class="line">    case Image</span><br><span class="line">    case Voice</span><br><span class="line">    case Video</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="label">class StrategyContext:</span> NSObject &#123; </span><br><span class="line"><span class="label">    var strategy:</span> RootStrategy?</span><br><span class="line">    // oc 则是 [TextSendStrategy class]....</span><br><span class="line"><span class="label">    let strategyClassDic: [MessageSendStrategyType : AnyClass] = [MessageSendStrategyType.Text : TextSendStrategy.self, .Image : ImageStrategy.self, .Voice : VoiceStrategy.self, .Video :</span> VideoStrategy.self]<span class="comment">;</span></span><br><span class="line">    </span><br><span class="line"><span class="label">//    let strategyStringDic: [MessageSendStrategyType : String] = [MessageSendStrategyType.Text :</span> <span class="string">"StrategyMode.TextSendStrategy"</span>, .Image : <span class="string">"StrategyMode.ImageStrategy"</span>, .Voice : <span class="string">"StrategyMode.VoiceStrategy"</span>, .Video : <span class="string">"StrategyMode.VideoStrategy"</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="label">    init(messageType :</span> MessageSendStrategyType) &#123;</span><br><span class="line"><span class="label">        let strategyClassClass:</span> AnyClass? = strategyClassDic[messageType]</span><br><span class="line">        strategy = (strategyClassClass! as! RootStrategy.Type)()</span><br><span class="line">        </span><br><span class="line"><span class="label">//        let strategyStringClass:</span> AnyClass! = NSClassFromString(strategyStringDic[messageType]!)</span><br><span class="line">//        self.strategy = (strategyStringClass as! RootStrategy.Type).new()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func contextInterface() &#123;</span><br><span class="line">        strategy!.run()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="escape">``</span><span class="escape">` </span> </span><br><span class="line"><span class="number">1</span>.定义一个<span class="escape">`M</span>essageSendStrategyType<span class="escape">`枚</span>举<span class="escape">`+</span><span class="escape">`反</span>射,解决内部/外部的<span class="escape">`s</span>witch case<span class="escape">`的</span>构建工厂(见工厂模式)判断  </span><br><span class="line"><span class="number">2</span>.给字典赋值的两种方式都行,但注意调用<span class="escape">`N</span>SClassFromString<span class="escape">`的</span>时候有坑,单纯的传<span class="escape">`类</span>名<span class="escape">`无</span>效,需要加上你的工程名,我的工程名是<span class="escape">`S</span>trategyMode<span class="escape">`,</span>那就必须是<span class="escape">`N</span>SClassFromString(StrategyMode.xxxx)<span class="escape">`才</span>行!!!  </span><br><span class="line"><span class="number">3</span>.调用<span class="escape">`n</span>ew()<span class="escape">`和</span><span class="escape">`(</span>)<span class="escape">`初</span>始化是不一样的,后面会给出说明  </span><br><span class="line"> &lt;!--more--&gt;  </span><br><span class="line">  </span><br><span class="line">- 接着定义<span class="escape">`R</span>ootStrategy<span class="escape">`,</span>也就是所有<span class="escape">`算</span>法<span class="escape">`的</span>父类/公共接口</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>@objc protocol SendFunctionDelegate: NSObjectProtocol {<br>    func strategyMsg()<br>    optional func sendReadyData()<br>    optional func uploadRequest(name: String?) -&gt; String?<br>    optional func uploadResource(id: String?, data: NSData?) -&gt; String?<br>    optional func otherMethod_A()<br>    optional func otherMethod_B()<br>}</p>
<p>class RootStrategy: NSObject{</p>
<pre><code>var delegate: SendFunctionDelegate?
required  override init() {
}
/**
*   多态的体现,父类的这个方法必须要子类去覆重,可以不写在接口,直接定义为父类的方法
*   不过这里通过IOP,定义这类方法为`required`必须实现的
*   这里通过接口方式而不是全部多态(好纠结,我表示运用的不熟练吧,反正我自己也没能完全说服自己)
*   总感觉试验失败了,囧!!!
*/
// 被我改来改去,达到所谓的消除父类的空方法....
func run() {
    self.delegate!.strategyMsg()
}
</code></pre><p>//    如果不实现strategyMsg(),就会报错,无法调用<br>//    func run() {<br>//        delegate!.strategyMsg()<br>//    }<br>}</p>
<p>/** 喵神的tip里面说到了 为什么要添加这样一个初始化方法</p>
<ul>
<li>单单是这样还是无法通过编译,编译器提示我们如果想要构建一个 Self 类型的对象的话,需要有 required 关键字修饰的初始化方 法,这是因为 Swift 必须保证 当前类和其子类都能响应这个 init 方法</li>
<li>required 要求必须要实现,但又因为init()是默认的构造器,子类会默认实现并且默认调用,required的关键就是会强制调用默认构造器<br>*/</li>
</ul>
<p>/**</p>
<ul>
<li>不过,如果你在Context中的初始化是用了<code>new()</code>就不需要实现下面方法</li>
<li>官方文档: This method is a combination of alloc and init. Like alloc, it initializes the isa instance variable of the new object so it points to the class data structure. It then invokes the init method to complete the initialization process.</li>
<li><p>所以,不需要你强制,子类也一定会做<code>init()</code>操作<br>*/<br>//    required override init() {<br>//<br>//    }</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS:这里也踩了很多坑<span class="attribute">...</span>一直在试验我前面提到文章里面说的<span class="string">`接口代替继承`</span>,貌似没成功,swift中对于<span class="string">`protocol`</span>和oc中有那么点不一样<span class="attribute">...</span>反正写乱了<span class="attribute">...</span>还是直接把方法直接写父类吧<span class="attribute">...</span>  </span><br><span class="line">  </span><br><span class="line">  - 然后就是<span class="string">`Strategy`</span>的具体实现了,如<span class="string">`TextSendStrategy`</span> <span class="string">`ImageStrategy`</span>  <span class="string">`VoiceStrategy`</span>  <span class="string">`VideoStrategy`</span>,暂举<span class="number">2</span>个栗子:</span><br></pre></td></tr></table></figure>
<p>// 文本<br>class TextSendStrategy: RootStrategy,SendFunctionDelegate {<br>required  init() {</p>
<pre><code>super.init()
self.delegate = self
</code></pre><p>}</p>
<p>func strategyMsg() {</p>
<pre><code>sendReadyData()
</code></pre><p>}</p>
<p>func sendReadyData() {</p>
<pre><code>println(&quot;文本消息,直接发送&quot;)
</code></pre><p>}<br>}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>
<p>// 图片<br>class ImageStrategy: RootStrategy,SendFunctionDelegate {</p>
<p>required  init() {</p>
<pre><code>super.init()
self.delegate = self
</code></pre><p>}</p>
<p> func strategyMsg() {</p>
<pre><code>let id = uploadRequest(&quot;123456&quot;)
let url = uploadResource(id, data: nil)
sendReadyData()
</code></pre><p>}</p>
<p>func uploadRequest(name: String?) -&gt; String? {</p>
<pre><code>println(&quot;ID申请好了&quot;)
return &quot;ID&quot;
</code></pre><p>}</p>
<p>func uploadResource(id: String?, data: NSData?) -&gt; String? {</p>
<pre><code>println(&quot;URL也得到了&quot;)
return &quot;URL&quot;
</code></pre><p>}</p>
<p>func  sendReadyData() {</p>
<pre><code>println(&quot;可以发送图片了&quot;)
</code></pre><p>}<br>}</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="bullet">- </span>最后调用</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>override func viewDidLoad() {<br>        super.viewDidLoad()<br>        // Do any additional setup after loading the view, typically from a nib.<br>        // video,text,voice,image随便传,要什么传什么<br>        let context = StrategyContext(messageType: .Image)<br>        context.contextInterface()</p>
<pre><code>}
</code></pre><p>```  </p>
<h1 id="u5C0F_u529F_u544A_u6210"><a href="#u5C0F_u529F_u544A_u6210" class="headerlink" title="小功告成"></a><font color="IndianRed">小功告成</font></h1><p>一个简单的策略模式Demo,基本就这样完成了.这样,是不是,即使存在各种类型的数据发送判断,也没有出现一个<code>if else</code>或<code>switch case</code>呀!<br>LZ最近的两个项目里面都用到了:<br>一是.文件传送,接受来自底层返回的各种类型数据,需要对应各自的数据处理方法<br>二是.网络请求,同栗子….</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/策略/">策略</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-iOS面试题总结与感想" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/03/21/iOS面试题总结与感想/" class="article-date">
      <time datetime="2015-03-21T10:15:21.000Z" itemprop="datePublished">2015-03-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/21/iOS面试题总结与感想/">iOS面试题总结与感想</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h3 id="u9898"><a href="#u9898" class="headerlink" title="题"></a><font color="IndianRed">题</font></h3><p>必须先吐槽一下,找工作面试确实是个累人的活呀,所以—&gt;<code>跳槽有风险,选择需谨慎</code>.LZ我为什么要换工作呢?就不在这里说明了…直接进入正题,这周的面试基本每天从早面到晚,面试表都填吐了…大小公司都有,列举下这段时间常见的面试题和一些个人理解.PS:LZ我水平有限,不好的地方,大家轻喷^_^!(因为完全是靠记忆,列举顺序纯凭感觉0.0)  </p>
<ol>
<li><code>@property</code>中的assign,retain,copy,nonatomic的意思分别是什么? (解释略…你懂的)</li>
<li><code>weak</code>和<code>assign</code>的区别,<code>strong</code>和<code>retain</code>的区别,<code>copy</code>和<code>retain</code>的区别?<br><code>assign</code>适用于非对象类型,<code>weak</code>弱引用在引用计数为0的时候会将对象置为nil.<br>其实从这个也可以引申到内存管理的一系列问题.面试官会让你讲讲<code>MRC</code>和<code>ARC</code>的理解,随即也引申出<code>Block</code>的内存机制,为啥推荐<code>Block</code>用<code>copy</code>,<code>Block</code>会存在哪些内存问题?循环引用?<br>推荐一个文章,讲的蛮不错的,里面也有对<code>Block</code>的链接引用-&gt;<a href="http://www.cocoachina.com/ios/20150206/11121.html#0-qzone-1-7097-d020d2d2a4e8d1a374a433f596ad1440">传送门,请点击我</a></li>
<li>依旧是内存管理,<code>release</code>和<code>autorelease</code>的含义?这里尤其要强调下<code>autorelease</code>,它引申出<code>自动释放池</code>,也能引申出<code>Run loop</code>!<br>参考下这两个链接:<a href="http://blog.csdn.net/yanfangjin/article/details/7545673">参考1号</a>@<a href="http://stackoverflow.com/questions/5766839/end-of-run-loop-autorelease-pool-recovery">参考2号</a>(<font color="red">PS:有的链接可能需要翻墙,但是作为一个开发人员来说,    拥有VPN进行google还是必备的吧!</font>)</li>
<li>OC语言的动态性指什么?有没有了解过<code>objective-c runtime</code>的相关问题?它包括那些含义?<br>依旧给出一些不错的文章链接:<a href="http://southpeak.github.io/blog/2014/10/25/objective-c-runtime-yun-xing-shi-zhi-lei-yu-dui-xiang/">Number1</a>@<a href="http://blog.codingcoder.com/dig-into-objc/">Number2</a>@<a href="http://chun.tips/">Number3</a></li>
<li>使用过<code>Core Graphic</code> <code>Core Animation</code> <code>Quartz Core</code>等常用框架吗?在什么条件下会用到?能够实现什么功能?一般这种问题,都是涉及到你自定义UI控件的能力,以及能够实现炫丽动画效果的能力.(含义很广,大家自行找资料,还是推荐个0.0-&gt;<a href="http://zsisme.gitbooks.io/ios-/content/index.html">讲Core Animation的</a>)</li>
<li>iOS中多线程有哪几种?各自之间有什么区别?这个问题,毋庸置疑,必问!!!<br><code>NSThread</code>:貌似基本没到过…囧….可以去了解下….<br><code>NSOperation</code>:据说是用在处理复杂的情况下…经常被问到与<code>GCD</code>的不同,LZ略纠结每次都不知道怎么回答,只能说一个处理复杂情况一个处理简单情况…也没用到过…不过你研究下<code>AFNetworking</code>的源码,可以发现,它的核心类是继承<code>NSOperation</code>的…<br><code>GCD</code>:常用…这个可以看看我的博客,里面很多它的介绍! <a href="http://blog.csdn.net/hmt20130412/article/category/2206439">点这里</a></li>
<li>数据存储这一块,你常用哪一种?什么是<code>序列化</code>?<code>sqlite</code>是直接用它还是用封装了它的第三方库?<code>sqlite</code>和<code>core data</code>的区别?<br>LZ碰到的基本都是问<code>sqlite</code>和<code>core data</code>的区别…从什么方面来决定一个项目采用哪种方式来做存储…个人觉得没有必要区分谁好谁坏…都去了解掌握肯定是有好处的…网上有很多讲两个之间的区别,但是就算你知道区别,如果两个都用不好也是白搭.唯有一解-&gt;<code>学!学!学</code>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/随笔/">随笔</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试题/">面试题</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/03/21/iOS面试题总结与感想/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Swift-AVFoundation-二维码扫描和生成" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/03/16/Swift-AVFoundation-二维码扫描和生成/" class="article-date">
      <time datetime="2015-03-16T00:46:28.000Z" itemprop="datePublished">2015-03-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/16/Swift-AVFoundation-二维码扫描和生成/">Swift AVFoundation 二维码扫描和生成</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>项目终于不需要支持iOS6了(泪崩),在二维码扫描这一块,能够完全的放弃<code>ZXing</code>库,改用系统的<code>AVFoundation</code>了,拿<code>swift</code>写了个Demo,效果如下:<br><strong>github地址:<a href="https://github.com/ConanMTHu/QRCodeByAVFoundation" target="_blank" rel="external">点这里</a></strong><br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/qrcode_1.PNG" alt="">  </p>
<p>有关<code>AVFoundation</code>和<code>Core Image</code>(滤镜等),可以先看看<strong>objc.io</strong>第21期和第23期的有关介绍.  </p>
<p>#<font color="IndianRed">初始化视频捕捉</font><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 初始化视频捕获</span></span><br><span class="line">    private func initCapture() &#123;</span><br><span class="line">        <span class="comment">// 代表抽象的硬件设备,这里传入video</span></span><br><span class="line">        let captureDevice = <span class="built_in">AVCaptureDevice</span><span class="variable">.defaultDeviceWithMediaType</span>(<span class="built_in">AVMediaTypeVideo</span>)</span><br><span class="line">        var error: <span class="built_in">NSError</span>?</span><br><span class="line">        <span class="comment">// 输入流</span></span><br><span class="line">        var captureInput = <span class="built_in">AVCaptureDeviceInput</span><span class="variable">.deviceInputWithDevice</span>(captureDevice, error: &amp;error) as? <span class="built_in">AVCaptureDeviceInput</span></span><br><span class="line">        <span class="keyword">if</span> (error != <span class="literal">nil</span> &amp;&amp; captureInput == <span class="literal">nil</span>) &#123;</span><br><span class="line">            let errorAlert = <span class="built_in">UIAlertController</span>(title: <span class="string">"提醒"</span>, message: <span class="string">"请在iPhone的\"设置-隐私-相机\"选项中,允许XXX访问您的相机"</span>, preferredStyle: <span class="variable">.Alert</span>)</span><br><span class="line">            errorAlert<span class="variable">.addAction</span>(<span class="built_in">UIAlertAction</span>(title: <span class="string">"确定"</span>, style: <span class="built_in">UIAlertActionStyle</span><span class="variable">.Default</span>, handler: <span class="literal">nil</span>))</span><br><span class="line">            <span class="keyword">self</span><span class="variable">.presentViewController</span>(errorAlert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// input和output的桥梁,它协调着intput到output的数据传输.(见字意,session-会话)</span></span><br><span class="line">            captureSession = <span class="built_in">AVCaptureSession</span>()</span><br><span class="line">            captureSession!<span class="variable">.addInput</span>(captureInput)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 输出流</span></span><br><span class="line">            let captureMetadataOutput = <span class="built_in">AVCaptureMetadataOutput</span>()</span><br><span class="line">            <span class="comment">// 限制扫描区域http://blog.csdn.net/lc_obj/article/details/41549469</span></span><br><span class="line">            captureMetadataOutput<span class="variable">.rectOfInterest</span> = <span class="built_in">CGRectMake</span>(<span class="number">128.0</span>/ScreenWH<span class="variable">.screenHeight</span>, (ScreenWH<span class="variable">.screenWidth</span> - <span class="number">280.0</span>)/ScreenWH<span class="variable">.screenWidth</span> * <span class="number">2.0</span>, <span class="number">280.0</span>/ScreenWH<span class="variable">.screenHeight</span>, <span class="number">280.0</span>/ScreenWH<span class="variable">.screenWidth</span>)</span><br><span class="line">            captureSession!<span class="variable">.addOutput</span>(captureMetadataOutput)</span><br><span class="line">            <span class="comment">// 添加的队列按规定必须是串行</span></span><br><span class="line">            captureMetadataOutput<span class="variable">.setMetadataObjectsDelegate</span>(<span class="keyword">self</span>, queue: dispatch_get_main_queue())</span><br><span class="line">            <span class="comment">// 指定信息类型,QRCode,你懂的</span></span><br><span class="line">            captureMetadataOutput<span class="variable">.metadataObjectTypes</span> = [<span class="built_in">AVMetadataObjectTypeQRCode</span>]</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 用这个预览图层和图像信息捕获会话(session)来显示视频</span></span><br><span class="line">            videoPreviewLayer = <span class="built_in">AVCaptureVideoPreviewLayer</span>(session: captureSession!)</span><br><span class="line">            videoPreviewLayer!<span class="variable">.videoGravity</span> = <span class="built_in">AVLayerVideoGravityResizeAspectFill</span></span><br><span class="line">            videoPreviewLayer!<span class="variable">.frame</span> = view<span class="variable">.bounds</span></span><br><span class="line">            view<span class="variable">.layer</span><span class="variable">.addSublayer</span>(videoPreviewLayer!)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">```  </span><br><span class="line">**PS:LZ用了下微信和新浪微博的扫一扫,发现那个扫描框是忽悠人的,也就是你没拿它对准二维码,只要二维码进入手机摄像头范围,就能够解码成功....囧**  </span><br><span class="line">所以LZ在代码中做了一个扫描区域的限制(感觉蛮无聊的)  </span><br><span class="line">&lt;!--more--&gt;   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="preprocessor">#<span class="title">&lt;font color="IndianRed"&gt;</span>实现代理解码<span class="title">&lt;/font&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<pre><code>// MARK: - AVCaptureMetadataOutputObjectsDelegate
func captureOutput(captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [AnyObject]!, fromConnection connection: AVCaptureConnection!) {
    if metadataObjects == nil || metadataObjects.count == 0 {
        captureView!.frame = CGRectZero
        return
    }
    // 刷取出来的数据
    for metadataObject in metadataObjects {
        if metadataObject.type == AVMetadataObjectTypeQRCode {
            let metadata = metadataObject as! AVMetadataMachineReadableCodeObject
            // 元数据对象就会被转化成图层的坐标
            let codeCoord = videoPreviewLayer!.transformedMetadataObjectForMetadataObject(metadata) as! AVMetadataMachineReadableCodeObject
            captureView!.frame = codeCoord.bounds
            if metadata.stringValue != nil {
                println(&quot;\(metadata.stringValue)&quot;)
                self.captureSession!.stopRunning()
                let successAlert = UIAlertController(title:&quot;提示&quot;, message:&quot;是否打开&quot; + metadata.stringValue, preferredStyle: .Alert)
                successAlert.addAction(UIAlertAction(title:&quot;取消&quot;, style: .Default, handler: { (_) -&gt; Void in
                    self.stopCapture()
                }))
                successAlert.addAction(UIAlertAction(title:&quot;确定&quot;, style: .Default, handler: { (_) -&gt; Void in
                    if metadata.stringValue.lowercaseString.hasPrefix(&quot;http&quot;) {
                        UIApplication.sharedApplication().openURL(NSURL(string: metadata.stringValue)!)
                        self.navigationController!.popViewControllerAnimated(true)
                    }
                }))
                self.presentViewController(successAlert, animated: true, completion: nil)
            }
        }
    }
}
</code></pre><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">数据转换`<span class="built_in">AVMetadataMachineReadableCodeObject</span>`对应二维码.  </span><br><span class="line">   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="preprocessor">#<span class="title">&lt;font color="IndianRed"&gt;</span>生成二维码<span class="title">&lt;/font&gt;</span></span></span><br></pre></td></tr></table></figure>
<pre><code>// MARK: - Private Methods
private func createQRForString(qrString: String?, qrImageName: String?) -&gt; UIImage?{
    if let sureQRString = qrString {
        let stringData = sureQRString.dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: false)
        // 创建一个二维码的滤镜
        let qrFilter = CIFilter(name: &quot;CIQRCodeGenerator&quot;)
        qrFilter.setValue(stringData, forKey: &quot;inputMessage&quot;)
        qrFilter.setValue(&quot;H&quot;, forKey: &quot;inputCorrectionLevel&quot;)
        let qrCIImage = qrFilter.outputImage
        // 创建一个颜色滤镜,黑白色
        let colorFilter = CIFilter(name: &quot;CIFalseColor&quot;)
        colorFilter.setDefaults()
        colorFilter.setValue(qrCIImage, forKey: &quot;inputImage&quot;)
        colorFilter.setValue(CIColor(red: 0, green: 0, blue: 0), forKey: &quot;inputColor0&quot;)
        colorFilter.setValue(CIColor(red: 1, green: 1, blue: 1), forKey: &quot;inputColor1&quot;)
        // 返回二维码image
        let codeImage = UIImage(CIImage: colorFilter.outputImage.imageByApplyingTransform(CGAffineTransformMakeScale(5, 5)))
        // 通常,二维码都是定制的,中间都会放想要表达意思的图片
        if let iconImage = UIImage(named: qrImageName!) {
            let rect = CGRectMake(0, 0, codeImage!.size.width, codeImage!.size.height)
            UIGraphicsBeginImageContext(rect.size)

            codeImage!.drawInRect(rect)
            let avatarSize = CGSizeMake(rect.size.width * 0.25, rect.size.height * 0.25)
            let x = (rect.width - avatarSize.width) * 0.5
            let y = (rect.height - avatarSize.height) * 0.5
            iconImage.drawInRect(CGRectMake(x, y, avatarSize.width, avatarSize.height))
            let resultImage = UIGraphicsGetImageFromCurrentImageContext()

            UIGraphicsEndImageContext()
            return resultImage
        }
        return codeImage
    }
    return nil
}
</code></pre><p>```<br>如图<br><img src="http://7qn7zn.com1.z0.glb.clouddn.com/qrcode_2.PNG" alt="">  </p>
<p><strong>结尾:<code>AVFoundation</code>这个框架特别的强大,也可以用它来写自定义相机,拍照和录制视频等</strong></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Swift/">Swift</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AVFoundation-二维码/">AVFoundation 二维码</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 Tommy@迷糊小书童
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        <div class="visit">
            <span id="busuanzi_container_site_pv" style='display:none'>
                <span id="site-visit" >本站到访数: 
                    <span id="busuanzi_value_site_uv"></span>
                </span>
            </span>
            <span id="busuanzi_container_page_pv" style='display:none'>
                <span id="page-visit">, 本页阅读量: 
                    <span id="busuanzi_value_page_pv"></span>
                </span>
            </span>
        </div>
    </div>
</footer>
    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-72551550-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>